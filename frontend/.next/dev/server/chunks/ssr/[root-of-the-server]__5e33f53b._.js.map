{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///app/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios'\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8001'\n\nexport const api = axios.create({\n  baseURL: `${API_URL}/api`,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n\n// Types\nexport interface Product {\n  id: string\n  name: string\n  category: string\n  price: number\n  is_recurring: boolean\n  is_archived: boolean\n}\n\nexport interface InventoryProduct {\n  product_id: string\n  product_name: string\n  category: string\n  quantity_produced: number\n  quantity_sold: number\n  quantity_wasted: number\n  quantity_remaining: number\n  price: number\n}\n\nexport interface DailyInventory {\n  id?: string\n  date: string\n  products: InventoryProduct[]\n  total_revenue: number\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface StatsSummary {\n  total_sales: number\n  total_wasted: number\n  total_sold: number\n  total_produced: number\n  products_stats: ProductStat[]\n}\n\nexport interface ProductStat {\n  product_id: string\n  product_name: string\n  category: string\n  total_produced: number\n  total_sold: number\n  total_wasted: number\n  total_revenue: number\n  avg_sold_per_day: number\n}\n\n// API Functions\nexport const productApi = {\n  getAll: () => api.get<Product[]>('/products'),\n  getOne: (id: string) => api.get<Product>(`/products/${id}`),\n  create: (data: Omit<Product, 'id' | 'is_archived'>) => api.post<Product>('/products', data),\n  update: (id: string, data: Partial<Product>) => api.put<Product>(`/products/${id}`, data),\n  delete: (id: string) => api.delete(`/products/${id}`),\n}\n\nexport const inventoryApi = {\n  getAll: (limit = 30) => api.get<DailyInventory[]>('/inventories', { params: { limit } }),\n  getByDate: (date: string) => api.get<DailyInventory>(`/inventories/${date}`),\n  create: (data: { date: string; products: InventoryProduct[] }) => api.post<DailyInventory>('/inventories', data),\n  update: (date: string, data: { products: InventoryProduct[] }) => api.put<DailyInventory>(`/inventories/${date}`, data),\n  delete: (date: string) => api.delete(`/inventories/${date}`),\n}\n\nexport const statsApi = {\n  getSummary: (startDate?: string, endDate?: string) => \n    api.get<StatsSummary>('/stats/summary', { params: { start_date: startDate, end_date: endDate } }),\n  getProductStats: (productId: string, startDate?: string, endDate?: string) =>\n    api.get(`/stats/product/${productId}`, { params: { start_date: startDate, end_date: endDate } }),\n  export: (startDate?: string, endDate?: string) =>\n    api.get('/export', { params: { start_date: startDate, end_date: endDate } }),\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,MAAM,UAAU,uFAAmC;AAE5C,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS,GAAG,QAAQ,IAAI,CAAC;IACzB,SAAS;QACP,gBAAgB;IAClB;AACF;AAoDO,MAAM,aAAa;IACxB,QAAQ,IAAM,IAAI,GAAG,CAAY;IACjC,QAAQ,CAAC,KAAe,IAAI,GAAG,CAAU,CAAC,UAAU,EAAE,IAAI;IAC1D,QAAQ,CAAC,OAA8C,IAAI,IAAI,CAAU,aAAa;IACtF,QAAQ,CAAC,IAAY,OAA2B,IAAI,GAAG,CAAU,CAAC,UAAU,EAAE,IAAI,EAAE;IACpF,QAAQ,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,UAAU,EAAE,IAAI;AACtD;AAEO,MAAM,eAAe;IAC1B,QAAQ,CAAC,QAAQ,EAAE,GAAK,IAAI,GAAG,CAAmB,gBAAgB;YAAE,QAAQ;gBAAE;YAAM;QAAE;IACtF,WAAW,CAAC,OAAiB,IAAI,GAAG,CAAiB,CAAC,aAAa,EAAE,MAAM;IAC3E,QAAQ,CAAC,OAAyD,IAAI,IAAI,CAAiB,gBAAgB;IAC3G,QAAQ,CAAC,MAAc,OAA2C,IAAI,GAAG,CAAiB,CAAC,aAAa,EAAE,MAAM,EAAE;IAClH,QAAQ,CAAC,OAAiB,IAAI,MAAM,CAAC,CAAC,aAAa,EAAE,MAAM;AAC7D;AAEO,MAAM,WAAW;IACtB,YAAY,CAAC,WAAoB,UAC/B,IAAI,GAAG,CAAe,kBAAkB;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;IACjG,iBAAiB,CAAC,WAAmB,WAAoB,UACvD,IAAI,GAAG,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;IAChG,QAAQ,CAAC,WAAoB,UAC3B,IAAI,GAAG,CAAC,WAAW;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;AAC9E"}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///app/frontend/app/produits/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Plus, Pencil, Trash2, Package } from 'lucide-react'\nimport { productApi, type Product } from '@/lib/api'\n\nexport default function ProduitsPage() {\n  const [products, setProducts] = useState<Product[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showModal, setShowModal] = useState(false)\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null)\n  const [formData, setFormData] = useState({\n    name: '',\n    category: 'viennoiserie',\n    price: '',\n    is_recurring: true,\n  })\n\n  useEffect(() => {\n    loadProducts()\n  }, [])\n\n  const loadProducts = async () => {\n    try {\n      setLoading(true)\n      const response = await productApi.getAll()\n      setProducts(response.data)\n    } catch (error) {\n      console.error('Error loading products:', error)\n      alert('Impossible de charger les produits')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleOpenModal = (product?: Product) => {\n    if (product) {\n      setEditingProduct(product)\n      setFormData({\n        name: product.name,\n        category: product.category,\n        price: product.price.toString(),\n        is_recurring: product.is_recurring,\n      })\n    } else {\n      setEditingProduct(null)\n      setFormData({\n        name: '',\n        category: 'viennoiserie',\n        price: '',\n        is_recurring: true,\n      })\n    }\n    setShowModal(true)\n  }\n\n  const handleSave = async () => {\n    if (!formData.name.trim()) {\n      alert('Le nom du produit est requis')\n      return\n    }\n\n    const price = parseFloat(formData.price)\n    if (isNaN(price) || price <= 0) {\n      alert('Le prix doit être un nombre valide')\n      return\n    }\n\n    try {\n      const productData = {\n        name: formData.name.trim(),\n        category: formData.category,\n        price: price,\n        is_recurring: formData.is_recurring,\n      }\n\n      if (editingProduct) {\n        await productApi.update(editingProduct.id, productData)\n        alert('Produit mis à jour')\n      } else {\n        await productApi.create(productData)\n        alert('Produit ajouté')\n      }\n\n      setShowModal(false)\n      loadProducts()\n    } catch (error: any) {\n      console.error('Error saving product:', error)\n      alert(error.response?.data?.detail || 'Impossible de sauvegarder le produit')\n    }\n  }\n\n  const handleDelete = async (product: Product) => {\n    if (!confirm(`Êtes-vous sûr de vouloir supprimer \"${product.name}\" ?`)) {\n      return\n    }\n\n    try {\n      await productApi.delete(product.id)\n      alert('Produit supprimé')\n      loadProducts()\n    } catch (error: any) {\n      console.error('Error deleting product:', error)\n      alert('Impossible de supprimer le produit')\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-slate-600\">Chargement...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-slate-900 mb-2\">Catalogue Produits</h1>\n            <p className=\"text-slate-600\">{products.length} produit(s)</p>\n          </div>\n          <button onClick={() => handleOpenModal()} className=\"btn-primary\">\n            <Plus size={20} className=\"inline mr-2\" />\n            Ajouter un produit\n          </button>\n        </div>\n\n        {/* Products Grid */}\n        {products.length === 0 ? (\n          <div className=\"card text-center py-16\">\n            <div className=\"text-slate-400 mb-4\">\n              <Package size={64} className=\"mx-auto\" />\n            </div>\n            <h3 className=\"text-xl font-semibold text-slate-700 mb-2\">Aucun produit</h3>\n            <p className=\"text-slate-600 mb-6\">Ajoutez votre premier produit pour commencer</p>\n            <button onClick={() => handleOpenModal()} className=\"btn-primary\">\n              <Plus size={20} className=\"inline mr-2\" />\n              Ajouter un produit\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {products.map((product) => (\n              <div key={product.id} className=\"card hover:shadow-md transition-shadow\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-slate-900 mb-1\">{product.name}</h3>\n                    <p className=\"text-sm text-slate-600 capitalize mb-2\">{product.category}</p>\n                    <p className=\"text-xl font-bold text-success\">{product.price.toFixed(2)} €</p>\n                  </div>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => handleOpenModal(product)}\n                      className=\"p-2 text-primary hover:bg-blue-50 rounded-lg transition-colors\"\n                    >\n                      <Pencil size={18} />\n                    </button>\n                    <button\n                      onClick={() => handleDelete(product)}\n                      className=\"p-2 text-danger hover:bg-red-50 rounded-lg transition-colors\"\n                    >\n                      <Trash2 size={18} />\n                    </button>\n                  </div>\n                </div>\n                {product.is_recurring && (\n                  <span className=\"inline-block px-3 py-1 bg-blue-100 text-primary text-xs font-semibold rounded-full\">\n                    Récurrent\n                  </span>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Modal */}\n        {showModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-xl max-w-lg w-full\">\n              <div className=\"p-6 border-b border-slate-200\">\n                <h2 className=\"text-2xl font-bold text-slate-900\">\n                  {editingProduct ? 'Modifier le produit' : 'Nouveau produit'}\n                </h2>\n              </div>\n\n              <div className=\"p-6 space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">Nom du produit</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Ex: Croissant\"\n                    className=\"input\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">Catégorie</label>\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {['viennoiserie', 'gâteau', 'autre'].map((cat) => (\n                      <button\n                        key={cat}\n                        onClick={() => setFormData({ ...formData, category: cat })}\n                        className={`py-2 px-4 rounded-lg font-medium transition-all ${\n                          formData.category === cat\n                            ? 'bg-primary text-white'\n                            : 'bg-slate-100 text-slate-700 hover:bg-slate-200'\n                        }`}\n                      >\n                        {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">Prix (€)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.price}\n                    onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                    placeholder=\"Ex: 1.50\"\n                    className=\"input\"\n                  />\n                </div>\n\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"recurring\"\n                    checked={formData.is_recurring}\n                    onChange={(e) => setFormData({ ...formData, is_recurring: e.target.checked })}\n                    className=\"w-5 h-5 text-primary rounded focus:ring-2 focus:ring-primary\"\n                  />\n                  <label htmlFor=\"recurring\" className=\"text-sm font-medium text-slate-700\">\n                    Produit récurrent (apparaît automatiquement dans les inventaires)\n                  </label>\n                </div>\n              </div>\n\n              <div className=\"p-6 border-t border-slate-200 flex space-x-4\">\n                <button onClick={() => setShowModal(false)} className=\"btn-secondary flex-1\">\n                  Annuler\n                </button>\n                <button onClick={handleSave} className=\"btn-primary flex-1\">\n                  {editingProduct ? 'Modifier' : 'Ajouter'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}