{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/faycalzouaoui/Documents/projects/Halimou/frontend/lib/api.ts"],"sourcesContent":["import axios from 'axios'\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8001'\n\nexport const api = axios.create({\n  baseURL: `${API_URL}/api`,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n\n// Types\nexport interface Product {\n  id: string\n  name: string\n  category: string\n  price: number\n  is_recurring: boolean\n  is_archived: boolean\n}\n\nexport interface InventoryProduct {\n  product_id: string\n  product_name: string\n  category: string\n  quantity_produced: number\n  quantity_sold: number\n  quantity_wasted: number\n  quantity_remaining: number\n  price: number\n}\n\nexport interface DailyInventory {\n  id?: string\n  date: string\n  products: InventoryProduct[]\n  total_revenue: number\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface StatsSummary {\n  total_sales: number\n  total_wasted: number\n  total_sold: number\n  total_produced: number\n  products_stats: ProductStat[]\n}\n\nexport interface ProductStat {\n  product_id: string\n  product_name: string\n  category: string\n  total_produced: number\n  total_sold: number\n  total_wasted: number\n  total_revenue: number\n  avg_sold_per_day: number\n}\n\n// API Functions\nexport const productApi = {\n  getAll: () => api.get<Product[]>('/products'),\n  getOne: (id: string) => api.get<Product>(`/products/${id}`),\n  create: (data: Omit<Product, 'id' | 'is_archived'>) => api.post<Product>('/products', data),\n  update: (id: string, data: Partial<Product>) => api.put<Product>(`/products/${id}`, data),\n  delete: (id: string) => api.delete(`/products/${id}`),\n}\n\nexport const inventoryApi = {\n  getAll: (limit = 30) => api.get<DailyInventory[]>('/inventories', { params: { limit } }),\n  getByDate: (date: string) => api.get<DailyInventory>(`/inventories/${date}`),\n  create: (data: { date: string; products: InventoryProduct[] }) => api.post<DailyInventory>('/inventories', data),\n  update: (date: string, data: { products: InventoryProduct[] }) => api.put<DailyInventory>(`/inventories/${date}`, data),\n  delete: (date: string) => api.delete(`/inventories/${date}`),\n}\n\nexport const statsApi = {\n  getSummary: (startDate?: string, endDate?: string) => \n    api.get<StatsSummary>('/stats/summary', { params: { start_date: startDate, end_date: endDate } }),\n  getProductStats: (productId: string, startDate?: string, endDate?: string) =>\n    api.get(`/stats/product/${productId}`, { params: { start_date: startDate, end_date: endDate } }),\n  export: (startDate?: string, endDate?: string) =>\n    api.get('/export', { params: { start_date: startDate, end_date: endDate } }),\n}\n\n// Payroll types and APIs\nexport interface Employee {\n  id: string\n  full_name: string\n  role?: string\n  base_salary: number\n  is_active: boolean\n  created_at?: string\n}\n\nexport interface PayrollEntry {\n  id?: string\n  employee_id: string\n  period: string // YYYY-MM\n  advances: number\n  paid: number\n  notes?: string\n  created_at?: string\n}\n\nexport const employeesApi = {\n  getAll: (includeInactive = false) => api.get<Employee[]>('/employees', { params: { include_inactive: includeInactive } }),\n  create: (data: Omit<Employee, 'id' | 'is_active' | 'created_at'>) => api.post<Employee>('/employees', data),\n  update: (id: string, data: Partial<Employee>) => api.put<Employee>(`/employees/${id}`, data),\n  delete: (id: string) => api.delete(`/employees/${id}`),\n}\n\nexport const payrollApi = {\n  getAll: (params?: { employee_id?: string; period?: string }) => api.get<PayrollEntry[]>('/payrolls', { params }),\n  create: (data: Omit<PayrollEntry, 'id' | 'created_at'>) => api.post<PayrollEntry>('/payrolls', data),\n  update: (id: string, data: Partial<PayrollEntry>) => api.put<PayrollEntry>(`/payrolls/${id}`, data),\n  delete: (id: string) => api.delete(`/payrolls/${id}`),\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,MAAM,UAAU,6DAAmC;AAE5C,MAAM,MAAM,mMAAK,CAAC,MAAM,CAAC;IAC9B,SAAS,GAAG,QAAQ,IAAI,CAAC;IACzB,SAAS;QACP,gBAAgB;IAClB;AACF;AAoDO,MAAM,aAAa;IACxB,QAAQ,IAAM,IAAI,GAAG,CAAY;IACjC,QAAQ,CAAC,KAAe,IAAI,GAAG,CAAU,CAAC,UAAU,EAAE,IAAI;IAC1D,QAAQ,CAAC,OAA8C,IAAI,IAAI,CAAU,aAAa;IACtF,QAAQ,CAAC,IAAY,OAA2B,IAAI,GAAG,CAAU,CAAC,UAAU,EAAE,IAAI,EAAE;IACpF,QAAQ,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,UAAU,EAAE,IAAI;AACtD;AAEO,MAAM,eAAe;IAC1B,QAAQ,CAAC,QAAQ,EAAE,GAAK,IAAI,GAAG,CAAmB,gBAAgB;YAAE,QAAQ;gBAAE;YAAM;QAAE;IACtF,WAAW,CAAC,OAAiB,IAAI,GAAG,CAAiB,CAAC,aAAa,EAAE,MAAM;IAC3E,QAAQ,CAAC,OAAyD,IAAI,IAAI,CAAiB,gBAAgB;IAC3G,QAAQ,CAAC,MAAc,OAA2C,IAAI,GAAG,CAAiB,CAAC,aAAa,EAAE,MAAM,EAAE;IAClH,QAAQ,CAAC,OAAiB,IAAI,MAAM,CAAC,CAAC,aAAa,EAAE,MAAM;AAC7D;AAEO,MAAM,WAAW;IACtB,YAAY,CAAC,WAAoB,UAC/B,IAAI,GAAG,CAAe,kBAAkB;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;IACjG,iBAAiB,CAAC,WAAmB,WAAoB,UACvD,IAAI,GAAG,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;IAChG,QAAQ,CAAC,WAAoB,UAC3B,IAAI,GAAG,CAAC,WAAW;YAAE,QAAQ;gBAAE,YAAY;gBAAW,UAAU;YAAQ;QAAE;AAC9E;AAsBO,MAAM,eAAe;IAC1B,QAAQ,CAAC,kBAAkB,KAAK,GAAK,IAAI,GAAG,CAAa,cAAc;YAAE,QAAQ;gBAAE,kBAAkB;YAAgB;QAAE;IACvH,QAAQ,CAAC,OAA4D,IAAI,IAAI,CAAW,cAAc;IACtG,QAAQ,CAAC,IAAY,OAA4B,IAAI,GAAG,CAAW,CAAC,WAAW,EAAE,IAAI,EAAE;IACvF,QAAQ,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,WAAW,EAAE,IAAI;AACvD;AAEO,MAAM,aAAa;IACxB,QAAQ,CAAC,SAAuD,IAAI,GAAG,CAAiB,aAAa;YAAE;QAAO;IAC9G,QAAQ,CAAC,OAAkD,IAAI,IAAI,CAAe,aAAa;IAC/F,QAAQ,CAAC,IAAY,OAAgC,IAAI,GAAG,CAAe,CAAC,UAAU,EAAE,IAAI,EAAE;IAC9F,QAAQ,CAAC,KAAe,IAAI,MAAM,CAAC,CAAC,UAAU,EAAE,IAAI;AACtD"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/faycalzouaoui/Documents/projects/Halimou/frontend/lib/currency.ts"],"sourcesContent":["export const CURRENCY_SYMBOL = process.env.NEXT_PUBLIC_CURRENCY || 'DA'\n\nexport function formatCurrency(amount: number): string {\n  const normalized = Number.isFinite(amount) ? amount : 0\n  return `${normalized.toFixed(2)} ${CURRENCY_SYMBOL}`\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,kBAAkB,QAAQ,GAAG,CAAC,oBAAoB,IAAI;AAE5D,SAAS,eAAe,MAAc;IAC3C,MAAM,aAAa,OAAO,QAAQ,CAAC,UAAU,SAAS;IACtD,OAAO,GAAG,WAAW,OAAO,CAAC,GAAG,CAAC,EAAE,iBAAiB;AACtD"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/faycalzouaoui/Documents/projects/Halimou/frontend/components/WeekBar.tsx"],"sourcesContent":["'use client'\n\nimport { addDays, startOfWeek, format, isSameDay } from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\nimport { useMemo } from 'react'\n\ninterface WeekBarProps {\n  date: string // 'yyyy-MM-dd'\n  onChange: (date: string) => void\n  weekStartsOn?: 1 | 0 // 1 = Monday (default), 0 = Sunday\n  title?: string\n}\n\nexport default function WeekBar({ date, onChange, weekStartsOn = 1, title }: WeekBarProps) {\n  const referenceDate = useMemo(() => new Date(date), [date])\n  const weekStart = startOfWeek(referenceDate, { weekStartsOn, locale: fr })\n  const days = Array.from({ length: 7 }).map((_, i) => addDays(weekStart, i))\n\n  const goPrevWeek = () => {\n    const prev = addDays(weekStart, -7)\n    onChange(format(prev, 'yyyy-MM-dd'))\n  }\n  const goNextWeek = () => {\n    const next = addDays(weekStart, 7)\n    onChange(format(next, 'yyyy-MM-dd'))\n  }\n  const goToday = () => {\n    onChange(format(new Date(), 'yyyy-MM-dd'))\n  }\n\n  return (\n    <div className=\"bg-white border border-slate-200 rounded-xl mb-6\">\n      <div className=\"flex items-center justify-between px-2 md:px-3 py-2 border-b border-slate-200\">\n        <button\n          onClick={goPrevWeek}\n          className=\"p-1 md:p-2 rounded-lg hover:bg-slate-100 text-slate-700\"\n          aria-label=\"Semaine précédente\"\n        >\n          <ChevronLeft size={18} />\n        </button>\n        <div className=\"flex flex-col sm:flex-row items-center gap-1 sm:gap-3 flex-1 px-2\">\n          <div className=\"text-xs sm:text-sm font-medium text-slate-700 text-center\">\n            {title && <span className=\"hidden sm:inline\">{title} • </span>}\n            <span className=\"hidden sm:inline\">{format(weekStart, 'dd MMM', { locale: fr })} – {format(addDays(weekStart, 6), 'dd MMM yyyy', { locale: fr })}</span>\n            <span className=\"sm:hidden\">{format(weekStart, 'dd/MM')} – {format(addDays(weekStart, 6), 'dd/MM')}</span>\n          </div>\n          <button\n            onClick={goToday}\n            className=\"px-2 py-1 text-xs rounded-lg border border-slate-200 hover:bg-slate-100 text-slate-700 whitespace-nowrap\"\n          >\n            Aujourd'hui\n          </button>\n        </div>\n        <button\n          onClick={goNextWeek}\n          className=\"p-1 md:p-2 rounded-lg hover:bg-slate-100 text-slate-700\"\n          aria-label=\"Semaine suivante\"\n        >\n          <ChevronRight size={18} />\n        </button>\n      </div>\n      <div className=\"grid grid-cols-7 gap-0.5 md:gap-1 p-1 md:p-2\">\n        {days.map((d) => {\n          const active = isSameDay(d, referenceDate)\n          return (\n            <button\n              key={d.toISOString()}\n              onClick={() => onChange(format(d, 'yyyy-MM-dd'))}\n              className={`\n                flex flex-col items-center py-1 md:py-2 rounded-lg transition-all\n                ${active ? 'bg-primary text-white shadow' : 'hover:bg-slate-100 text-slate-700'}\n              `}\n            >\n              <span className=\"text-[10px] md:text-xs opacity-80\">\n                {format(d, 'EEE', { locale: fr })}\n              </span>\n              <span className=\"text-sm md:text-lg font-semibold\">\n                {format(d, 'd', { locale: fr })}\n              </span>\n            </button>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAce,SAAS,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,CAAC,EAAE,KAAK,EAAgB;IACvF,MAAM,gBAAgB,IAAA,+UAAO,EAAC,IAAM,IAAI,KAAK,OAAO;QAAC;KAAK;IAC1D,MAAM,YAAY,IAAA,iNAAW,EAAC,eAAe;QAAE;QAAc,QAAQ,yMAAE;IAAC;IACxE,MAAM,OAAO,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAE,GAAG,GAAG,CAAC,CAAC,GAAG,IAAM,IAAA,yMAAO,EAAC,WAAW;IAExE,MAAM,aAAa;QACjB,MAAM,OAAO,IAAA,yMAAO,EAAC,WAAW,CAAC;QACjC,SAAS,IAAA,uNAAM,EAAC,MAAM;IACxB;IACA,MAAM,aAAa;QACjB,MAAM,OAAO,IAAA,yMAAO,EAAC,WAAW;QAChC,SAAS,IAAA,uNAAM,EAAC,MAAM;IACxB;IACA,MAAM,UAAU;QACd,SAAS,IAAA,uNAAM,EAAC,IAAI,QAAQ;IAC9B;IAEA,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6WAAC,uTAAW;4BAAC,MAAM;;;;;;;;;;;kCAErB,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;gCAAI,WAAU;;oCACZ,uBAAS,6WAAC;wCAAK,WAAU;;4CAAoB;4CAAM;;;;;;;kDACpD,6WAAC;wCAAK,WAAU;;4CAAoB,IAAA,uNAAM,EAAC,WAAW,UAAU;gDAAE,QAAQ,yMAAE;4CAAC;4CAAG;4CAAI,IAAA,uNAAM,EAAC,IAAA,yMAAO,EAAC,WAAW,IAAI,eAAe;gDAAE,QAAQ,yMAAE;4CAAC;;;;;;;kDAC9I,6WAAC;wCAAK,WAAU;;4CAAa,IAAA,uNAAM,EAAC,WAAW;4CAAS;4CAAI,IAAA,uNAAM,EAAC,IAAA,yMAAO,EAAC,WAAW,IAAI;;;;;;;;;;;;;0CAE5F,6WAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;kCAIH,6WAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCAEX,cAAA,6WAAC,0TAAY;4BAAC,MAAM;;;;;;;;;;;;;;;;;0BAGxB,6WAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAC;oBACT,MAAM,SAAS,IAAA,6MAAS,EAAC,GAAG;oBAC5B,qBACE,6WAAC;wBAEC,SAAS,IAAM,SAAS,IAAA,uNAAM,EAAC,GAAG;wBAClC,WAAW,CAAC;;gBAEV,EAAE,SAAS,iCAAiC,oCAAoC;cAClF,CAAC;;0CAED,6WAAC;gCAAK,WAAU;0CACb,IAAA,uNAAM,EAAC,GAAG,OAAO;oCAAE,QAAQ,yMAAE;gCAAC;;;;;;0CAEjC,6WAAC;gCAAK,WAAU;0CACb,IAAA,uNAAM,EAAC,GAAG,KAAK;oCAAE,QAAQ,yMAAE;gCAAC;;;;;;;uBAX1B,EAAE,WAAW;;;;;gBAexB;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///Users/faycalzouaoui/Documents/projects/Halimou/frontend/app/statistiques/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { format, subDays, startOfWeek, addDays } from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { Download, TrendingUp, TrendingDown, DollarSign, ShoppingCart, Trash2, Package } from 'lucide-react'\nimport { statsApi, inventoryApi, type StatsSummary, type DailyInventory } from '@/lib/api'\nimport { formatCurrency } from '@/lib/currency'\nimport WeekBar from '@/components/WeekBar'\n\nexport default function StatistiquesPage() {\n  const [stats, setStats] = useState<StatsSummary | null>(null)\n  const [recentInventories, setRecentInventories] = useState<DailyInventory[]>([])\n  const [loading, setLoading] = useState(true)\n  const [period, setPeriod] = useState<'7' | '30' | 'all' | 'week'>('week')\n  const [selectedDate, setSelectedDate] = useState(format(new Date(), 'yyyy-MM-dd'))\n\n  useEffect(() => {\n    loadStats()\n  }, [period])\n\n  const loadStats = async () => {\n    try {\n      setLoading(true)\n      const todayStr = format(new Date(), 'yyyy-MM-dd')\n      let startDate = ''\n      let endDate = todayStr\n\n      if (period === 'week') {\n        const ws = startOfWeek(new Date(selectedDate), { weekStartsOn: 1, locale: fr })\n        startDate = format(ws, 'yyyy-MM-dd')\n        endDate = format(addDays(ws, 6), 'yyyy-MM-dd')\n      } else if (period === '7') {\n        startDate = format(subDays(new Date(), 7), 'yyyy-MM-dd')\n      } else if (period === '30') {\n        startDate = format(subDays(new Date(), 30), 'yyyy-MM-dd')\n      } else {\n        startDate = ''\n        endDate = todayStr\n      }\n\n      const params = period !== 'all' ? { startDate, endDate } : {}\n\n      const [statsRes, inventoriesRes] = await Promise.all([\n        statsApi.getSummary(params.startDate, params.endDate),\n        inventoryApi.getAll(10),\n      ])\n\n      setStats(statsRes.data)\n      setRecentInventories(inventoriesRes.data)\n    } catch (error) {\n      console.error('Error loading stats:', error)\n      alert('Impossible de charger les statistiques')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleExport = async () => {\n    try {\n      const todayStr = format(new Date(), 'yyyy-MM-dd')\n      let startDate = ''\n      let endDate = todayStr\n\n      if (period === 'week') {\n        const ws = startOfWeek(new Date(selectedDate), { weekStartsOn: 1, locale: fr })\n        startDate = format(ws, 'yyyy-MM-dd')\n        endDate = format(addDays(ws, 6), 'yyyy-MM-dd')\n      } else if (period === '7') {\n        startDate = format(subDays(new Date(), 7), 'yyyy-MM-dd')\n      } else if (period === '30') {\n        startDate = format(subDays(new Date(), 30), 'yyyy-MM-dd')\n      }\n\n      const response = await statsApi.export(startDate || undefined, endDate)\n      const blob = new Blob([JSON.stringify(response.data, null, 2)], { type: 'application/json' })\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `export-patisserie-${today}.json`\n      a.click()\n      window.URL.revokeObjectURL(url)\n      alert('Export réussi !')\n    } catch (error) {\n      console.error('Error exporting data:', error)\n      alert('Impossible d\\'exporter les données')\n    }\n  }\n\n  const getWastePercentage = (wasted: number, produced: number) => {\n    if (produced === 0) return 0\n    return ((wasted / produced) * 100).toFixed(1)\n  }\n\n  const getSoldPercentage = (sold: number, produced: number) => {\n    if (produced === 0) return 0\n    return ((sold / produced) * 100).toFixed(1)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-slate-600\">Chargement...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"p-4 md:p-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header + Week bar */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4\">\n          <div>\n            <h1 className=\"text-2xl md:text-3xl font-bold text-slate-900 mb-2\">Statistiques</h1>\n            <p className=\"text-slate-600\">Analysez vos performances</p>\n          </div>\n          <button onClick={handleExport} className=\"btn-secondary w-full sm:w-auto\">\n            <Download size={20} className=\"inline mr-2\" />\n            Exporter\n          </button>\n        </div>\n        <WeekBar\n          date={selectedDate}\n          onChange={(d) => {\n            setSelectedDate(d)\n            setPeriod('week')\n          }}\n          title=\"Semaine\"\n        />\n\n        {/* Period Selector */}\n        <div className=\"flex flex-wrap gap-2 md:gap-3 mb-6 md:mb-8\">\n          {[\n            { value: 'week', label: 'Semaine' },\n            { value: '7', label: '7 jours' },\n            { value: '30', label: '30 jours' },\n            { value: 'all', label: 'Tout' },\n          ].map((item) => (\n            <button\n              key={item.value}\n              onClick={() => setPeriod(item.value as any)}\n              className={`px-4 md:px-6 py-2 rounded-lg font-medium transition-all text-sm md:text-base ${\n                period === item.value\n                  ? 'bg-primary text-white shadow-md'\n                  : 'bg-white text-slate-700 hover:bg-slate-50 border border-slate-200'\n              }`}\n            >\n              {item.label}\n            </button>\n          ))}\n        </div>\n\n        {stats && (\n          <>\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n              <div className=\"card border-t-4 border-t-success\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"p-3 bg-green-100 rounded-lg\">\n                    <DollarSign size={24} className=\"text-success\" />\n                  </div>\n                  <TrendingUp size={20} className=\"text-success\" />\n                </div>\n                <p className=\"text-sm text-slate-600 mb-1\">Chiffre d'affaires</p>\n                <p className=\"text-3xl font-bold text-slate-900\">{formatCurrency(stats.total_sales)}</p>\n              </div>\n\n              <div className=\"card border-t-4 border-t-primary\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"p-3 bg-blue-100 rounded-lg\">\n                    <ShoppingCart size={24} className=\"text-primary\" />\n                  </div>\n                  <TrendingUp size={20} className=\"text-primary\" />\n                </div>\n                <p className=\"text-sm text-slate-600 mb-1\">Produits vendus</p>\n                <p className=\"text-3xl font-bold text-slate-900\">{stats.total_sold}</p>\n              </div>\n\n              <div className=\"card border-t-4 border-t-danger\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"p-3 bg-red-100 rounded-lg\">\n                    <Trash2 size={24} className=\"text-danger\" />\n                  </div>\n                  <TrendingDown size={20} className=\"text-danger\" />\n                </div>\n                <p className=\"text-sm text-slate-600 mb-1\">Produits jetés</p>\n                <p className=\"text-3xl font-bold text-slate-900\">{stats.total_wasted}</p>\n              </div>\n\n              <div className=\"card border-t-4 border-t-warning\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"p-3 bg-orange-100 rounded-lg\">\n                    <Package size={24} className=\"text-warning\" />\n                  </div>\n                </div>\n                <p className=\"text-sm text-slate-600 mb-1\">Produits fabriqués</p>\n                <p className=\"text-3xl font-bold text-slate-900\">{stats.total_produced}</p>\n              </div>\n            </div>\n\n            {/* Products Performance */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-slate-900 mb-4\">Performance par produit</h2>\n              {stats.products_stats.length === 0 ? (\n                <div className=\"card text-center py-12\">\n                  <p className=\"text-slate-600\">Aucune donnée disponible</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {stats.products_stats.map((product) => (\n                    <div key={product.product_id} className=\"card\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-slate-900\">{product.product_name}</h3>\n                          <p className=\"text-sm text-slate-600 capitalize\">{product.category}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-2xl font-bold text-success\">{formatCurrency(product.total_revenue)}</p>\n                          <p className=\"text-sm text-slate-600\">Revenu total</p>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4\">\n                        <div className=\"text-center\">\n                          <p className=\"text-sm text-slate-600 mb-1\">Moyenne/jour</p>\n                          <p className=\"text-xl font-bold text-slate-900\">{product.avg_sold_per_day}</p>\n                        </div>\n                        <div className=\"text-center\">\n                          <p className=\"text-sm text-slate-600 mb-1\">Taux de vente</p>\n                        <p className=\"text-xl font-bold text-success\">\n                            {getSoldPercentage(product.total_sold, product.total_produced)}%\n                          </p>\n                        </div>\n                        <div className=\"text-center\">\n                          <p className=\"text-sm text-slate-600 mb-1\">Gaspillage</p>\n                        <p className=\"text-xl font-bold text-danger\">\n                            {getWastePercentage(product.total_wasted, product.total_produced)}%\n                          </p>\n                        </div>\n                      </div>\n\n                      {/* Progress Bar */}\n                      <div className=\"h-3 bg-slate-100 rounded-full overflow-hidden flex\">\n                        <div\n                          className=\"bg-success h-full\"\n                          style={{\n                            width: `${getSoldPercentage(product.total_sold, product.total_produced)}%`,\n                          }}\n                        />\n                        <div\n                          className=\"bg-danger h-full\"\n                          style={{\n                            width: `${getWastePercentage(product.total_wasted, product.total_produced)}%`,\n                          }}\n                        />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Recent Inventories */}\n            <div>\n              <h2 className=\"text-2xl font-bold text-slate-900 mb-4\">Historique récent</h2>\n              {recentInventories.length === 0 ? (\n                <div className=\"card text-center py-12\">\n                  <p className=\"text-slate-600\">Aucun inventaire</p>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {recentInventories.map((inventory) => (\n                    <div key={inventory.id} className=\"card hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <p className=\"text-sm font-medium text-slate-600\">\n                          {format(new Date(inventory.date), 'dd MMM yyyy', { locale: fr })}\n                        </p>\n                        <p className=\"text-xl font-bold text-success\">\n                          {formatCurrency(inventory.total_revenue)}\n                        </p>\n                      </div>\n                      <p className=\"text-sm text-slate-600\">{inventory.products.length} produit(s)</p>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}